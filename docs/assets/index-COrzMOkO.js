(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const d=document.getElementById("tareaForm"),f=document.getElementById("mostrar");d.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("tareaId").value,r=document.getElementById("titulo").value,c=document.getElementById("completada").checked,o={id:t,titulo:r,completada:c};o.id?await g(o):await h(o)});const h=async e=>{try{if((await fetch("http://localhost:3000/tareas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({titulo:e.titulo,completada:e.completada})})).ok)d.reset(),l();else throw new Error("No se pudo crear la tarea")}catch(t){console.error(`Error!!!:  ${t}`)}},l=async()=>{try{const e=await fetch("http://localhost:3000/tareas");if(e.ok){const t=await e.json();f.innerHTML="",y(t)}}catch{console.log("Error!!")}},y=e=>{e.forEach(t=>{const r=document.createElement("tr"),c=document.createElement("td");c.textContent=t.id,r.appendChild(c);const o=document.createElement("td");o.textContent=t.titulo,r.appendChild(o);const n=document.createElement("td");n.textContent=t.completada,r.appendChild(n);const a=document.createElement("td"),s=document.createElement("button");s.classList.add("btn-icon");const m=document.createElement("img");m.src="./assets/img/icons8-eliminar-25.png",s.appendChild(m),s.addEventListener("click",()=>E(t.id)),a.appendChild(s),r.appendChild(a);const u=document.createElement("td"),i=document.createElement("button");i.classList.add("btn-icon");const p=document.createElement("img");p.src="./assets/img/icons8-editar-archivo-de-texto-25.png",i.appendChild(p),i.addEventListener("click",()=>C(t)),u.appendChild(i),r.appendChild(u),f.appendChild(r)})},E=async e=>{try{(await fetch(`http://localhost:3000/tareas/${e}`,{method:"DELETE"})).ok&&l()}catch(t){console.error(`Error al eliminar la tarea con ID ${e}, ${t}`)}},g=async e=>{try{(await fetch(`http://localhost:3000/tareas/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({titulo:e.titulo,completada:e.completada})})).ok&&(d.reset(),l())}catch(t){console.error(`Error al modificar la tarea con ID ${e.id}, ${t}`)}},C=async e=>{document.getElementById("tareaId").value=e.id,document.getElementById("titulo").value=e.titulo,document.getElementById("completada").value=e.completada};
